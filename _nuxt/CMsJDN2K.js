import{D as pe,E as je,G as Ke,z as Re,H as Be,I as Pe,J as We,K as q,L as _e,r as ie,o as Ue,M as F,e as x,w as D,h as K,N as J,d as B,f as $,O as ve,P as b,n as E,Q as ye,R as Je,S as Qe,U as Ge,V as Ye,W as He,X as Xe,Y as ee,Z as Ze,$ as Ie,a0 as Se,a1 as Fe,a2 as ke,a3 as et,g as R,a4 as tt,a5 as nt,a6 as st,a7 as it,B as ot,t as Q,F as rt,a8 as at}from"./YrKSdPU3.js";import{_ as Ce}from"./HJOYeym-.js";import{_ as lt}from"./DcolCWhO.js";const ct={slots:{root:"relative inline-flex items-center",base:["w-full rounded-md border-0 placeholder:text-dimmed focus:outline-none disabled:cursor-not-allowed disabled:opacity-75","transition-colors"],leading:"absolute inset-y-0 start-0 flex items-center",leadingIcon:"shrink-0 text-dimmed",leadingAvatar:"shrink-0",leadingAvatarSize:"",trailing:"absolute inset-y-0 end-0 flex items-center",trailingIcon:"shrink-0 text-dimmed"},variants:{buttonGroup:{horizontal:{root:"group has-focus-visible:z-[1]",base:"group-not-only:group-first:rounded-e-none group-not-only:group-last:rounded-s-none group-not-last:group-not-first:rounded-none"},vertical:{root:"group has-focus-visible:z-[1]",base:"group-not-only:group-first:rounded-b-none group-not-only:group-last:rounded-t-none group-not-last:group-not-first:rounded-none"}},size:{xs:{base:"px-2 py-1 text-xs gap-1",leading:"ps-2",trailing:"pe-2",leadingIcon:"size-4",leadingAvatarSize:"3xs",trailingIcon:"size-4"},sm:{base:"px-2.5 py-1.5 text-xs gap-1.5",leading:"ps-2.5",trailing:"pe-2.5",leadingIcon:"size-4",leadingAvatarSize:"3xs",trailingIcon:"size-4"},md:{base:"px-2.5 py-1.5 text-sm gap-1.5",leading:"ps-2.5",trailing:"pe-2.5",leadingIcon:"size-5",leadingAvatarSize:"2xs",trailingIcon:"size-5"},lg:{base:"px-3 py-2 text-sm gap-2",leading:"ps-3",trailing:"pe-3",leadingIcon:"size-5",leadingAvatarSize:"2xs",trailingIcon:"size-5"},xl:{base:"px-3 py-2 text-base gap-2",leading:"ps-3",trailing:"pe-3",leadingIcon:"size-6",leadingAvatarSize:"xs",trailingIcon:"size-6"}},variant:{outline:"text-highlighted bg-default ring ring-inset ring-accented",soft:"text-highlighted bg-elevated/50 hover:bg-elevated focus:bg-elevated disabled:bg-elevated/50",subtle:"text-highlighted bg-elevated ring ring-inset ring-accented",ghost:"text-highlighted bg-transparent hover:bg-elevated focus:bg-elevated disabled:bg-transparent dark:disabled:bg-transparent",none:"text-highlighted bg-transparent"},color:{primary:"",secondary:"",success:"",info:"",warning:"",error:"",neutral:""},leading:{true:""},trailing:{true:""},loading:{true:""},highlight:{true:""},type:{file:"file:me-1.5 file:font-medium file:text-muted file:outline-none"}},compoundVariants:[{color:"primary",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-primary"},{color:"secondary",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-secondary"},{color:"success",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-success"},{color:"info",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-info"},{color:"warning",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-warning"},{color:"error",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-error"},{color:"primary",highlight:!0,class:"ring ring-inset ring-primary"},{color:"secondary",highlight:!0,class:"ring ring-inset ring-secondary"},{color:"success",highlight:!0,class:"ring ring-inset ring-success"},{color:"info",highlight:!0,class:"ring ring-inset ring-info"},{color:"warning",highlight:!0,class:"ring ring-inset ring-warning"},{color:"error",highlight:!0,class:"ring ring-inset ring-error"},{color:"neutral",variant:["outline","subtle"],class:"focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-inverted"},{color:"neutral",highlight:!0,class:"ring ring-inset ring-inverted"},{leading:!0,size:"xs",class:"ps-7"},{leading:!0,size:"sm",class:"ps-8"},{leading:!0,size:"md",class:"ps-9"},{leading:!0,size:"lg",class:"ps-10"},{leading:!0,size:"xl",class:"ps-11"},{trailing:!0,size:"xs",class:"pe-7"},{trailing:!0,size:"sm",class:"pe-8"},{trailing:!0,size:"md",class:"pe-9"},{trailing:!0,size:"lg",class:"pe-10"},{trailing:!0,size:"xl",class:"pe-11"},{loading:!0,leading:!0,class:{leadingIcon:"animate-spin"}},{loading:!0,leading:!1,trailing:!0,class:{trailingIcon:"animate-spin"}}],defaultVariants:{size:"md",color:"primary",variant:"outline"}},ut=["id","type","value","name","placeholder","disabled","required","autocomplete"],dt=Object.assign({inheritAttrs:!1},{__name:"UInput",props:pe({as:{type:null,required:!1},id:{type:String,required:!1},name:{type:String,required:!1},type:{type:null,required:!1,default:"text"},placeholder:{type:String,required:!1},color:{type:null,required:!1},variant:{type:null,required:!1},size:{type:null,required:!1},required:{type:Boolean,required:!1},autocomplete:{type:null,required:!1,default:"off"},autofocus:{type:Boolean,required:!1},autofocusDelay:{type:Number,required:!1,default:0},disabled:{type:Boolean,required:!1},highlight:{type:Boolean,required:!1},class:{type:null,required:!1},ui:{type:null,required:!1},icon:{type:String,required:!1},avatar:{type:Object,required:!1},leading:{type:Boolean,required:!1},leadingIcon:{type:String,required:!1},trailing:{type:Boolean,required:!1},trailingIcon:{type:String,required:!1},loading:{type:Boolean,required:!1},loadingIcon:{type:String,required:!1}},{modelValue:{type:null},modelModifiers:{}}),emits:pe(["update:modelValue","blur","change"],["update:modelValue"]),setup(i,{expose:e,emit:t}){const n=i,s=t,o=je(),[a,r]=Ke(i,"modelValue"),c=Re(),{emitFormBlur:u,emitFormInput:l,emitFormChange:h,size:d,color:g,id:m,name:f,highlight:p,disabled:v,emitFormFocus:y,ariaAttrs:L}=Be(n,{}),{orientation:T,size:V}=Pe(n),{isLeading:z,isTrailing:I,leadingIconName:ae,trailingIconName:le}=We(n),W=q(()=>V.value||d.value),S=q(()=>{var _;return _e({extend:_e(ct),...((_=c.ui)==null?void 0:_.input)||{}})({type:n.type,color:g.value,variant:n.variant,size:W==null?void 0:W.value,loading:n.loading,highlight:p.value,leading:z.value||!!n.avatar||!!o.leading,trailing:I.value||!!o.trailing,buttonGroup:T.value})}),U=ie(null);function ce(_){r.trim&&(_=(_==null?void 0:_.trim())??null),(r.number||n.type==="number")&&(_=Ge(_)),r.nullify&&(_||(_=null)),a.value=_,l()}function De(_){r.lazy||ce(_.target.value)}function qe(_){const A=_.target.value;r.lazy&&ce(A),r.trim&&(_.target.value=A.trim()),h(),s("change",_)}function $e(_){u(),s("blur",_)}function Ne(){var _;n.autofocus&&((_=U.value)==null||_.focus())}return Ue(()=>{setTimeout(()=>{Ne()},n.autofocusDelay)}),e({inputRef:U}),(_,A)=>{var ue;return x(),F(b(Qe),{as:i.as,class:E(S.value.root({class:[(ue=n.ui)==null?void 0:ue.root,n.class]}))},{default:D(()=>{var de,he,fe;return[K("input",ve({id:b(m),ref_key:"inputRef",ref:U,type:i.type,value:b(a),name:b(f),placeholder:i.placeholder,class:S.value.base({class:(de=n.ui)==null?void 0:de.base}),disabled:b(v),required:i.required,autocomplete:i.autocomplete},{..._.$attrs,...b(L)},{onInput:De,onBlur:$e,onChange:qe,onFocus:A[0]||(A[0]=(...C)=>b(y)&&b(y)(...C))}),null,16,ut),J(_.$slots,"default"),b(z)||i.avatar||o.leading?(x(),B("span",{key:0,class:E(S.value.leading({class:(he=n.ui)==null?void 0:he.leading}))},[J(_.$slots,"leading",{},()=>{var C,ge,me;return[b(z)&&b(ae)?(x(),F(ye,{key:0,name:b(ae),class:E(S.value.leadingIcon({class:(C=n.ui)==null?void 0:C.leadingIcon}))},null,8,["name","class"])):i.avatar?(x(),F(Je,ve({key:1,size:((ge=n.ui)==null?void 0:ge.leadingAvatarSize)||S.value.leadingAvatarSize()},i.avatar,{class:S.value.leadingAvatar({class:(me=n.ui)==null?void 0:me.leadingAvatar})}),null,16,["size","class"])):$("",!0)]})],2)):$("",!0),b(I)||o.trailing?(x(),B("span",{key:1,class:E(S.value.trailing({class:(fe=n.ui)==null?void 0:fe.trailing}))},[J(_.$slots,"trailing",{},()=>{var C;return[b(le)?(x(),F(ye,{key:0,name:b(le),class:E(S.value.trailingIcon({class:(C=n.ui)==null?void 0:C.trailingIcon}))},null,8,["name","class"])):$("",!0)]})],2)):$("",!0)]}),_:3},8,["as","class"])}}}),ht="ENTRIES",Ve="KEYS",Me="VALUES",w="";class G{constructor(e,t){const n=e._tree,s=Array.from(n.keys());this.set=e,this._type=t,this._path=s.length>0?[{node:n,keys:s}]:[]}next(){const e=this.dive();return this.backtrack(),e}dive(){if(this._path.length===0)return{done:!0,value:void 0};const{node:e,keys:t}=M(this._path);if(M(t)===w)return{done:!1,value:this.result()};const n=e.get(M(t));return this._path.push({node:n,keys:Array.from(n.keys())}),this.dive()}backtrack(){if(this._path.length===0)return;const e=M(this._path).keys;e.pop(),!(e.length>0)&&(this._path.pop(),this.backtrack())}key(){return this.set._prefix+this._path.map(({keys:e})=>M(e)).filter(e=>e!==w).join("")}value(){return M(this._path).node.get(w)}result(){switch(this._type){case Me:return this.value();case Ve:return this.key();default:return[this.key(),this.value()]}}[Symbol.iterator](){return this}}const M=i=>i[i.length-1],ft=(i,e,t)=>{const n=new Map;if(e===void 0)return n;const s=e.length+1,o=s+t,a=new Uint8Array(o*s).fill(t+1);for(let r=0;r<s;++r)a[r]=r;for(let r=1;r<o;++r)a[r*s]=r;return Oe(i,e,t,n,a,1,s,""),n},Oe=(i,e,t,n,s,o,a,r)=>{const c=o*a;e:for(const u of i.keys())if(u===w){const l=s[c-1];l<=t&&n.set(r,[i.get(u),l])}else{let l=o;for(let h=0;h<u.length;++h,++l){const d=u[h],g=a*l,m=g-a;let f=s[g];const p=Math.max(0,l-t-1),v=Math.min(a-1,l+t);for(let y=p;y<v;++y){const L=d!==e[y],T=s[m+y]+ +L,V=s[m+y+1]+1,z=s[g+y]+1,I=s[g+y+1]=Math.min(T,V,z);I<f&&(f=I)}if(f>t)continue e}Oe(i.get(u),e,t,n,s,l,a,r+u)}};class k{constructor(e=new Map,t=""){this._size=void 0,this._tree=e,this._prefix=t}atPrefix(e){if(!e.startsWith(this._prefix))throw new Error("Mismatched prefix");const[t,n]=P(this._tree,e.slice(this._prefix.length));if(t===void 0){const[s,o]=oe(n);for(const a of s.keys())if(a!==w&&a.startsWith(o)){const r=new Map;return r.set(a.slice(o.length),s.get(a)),new k(r,e)}}return new k(t,e)}clear(){this._size=void 0,this._tree.clear()}delete(e){return this._size=void 0,gt(this._tree,e)}entries(){return new G(this,ht)}forEach(e){for(const[t,n]of this)e(t,n,this)}fuzzyGet(e,t){return ft(this._tree,e,t)}get(e){const t=te(this._tree,e);return t!==void 0?t.get(w):void 0}has(e){const t=te(this._tree,e);return t!==void 0&&t.has(w)}keys(){return new G(this,Ve)}set(e,t){if(typeof e!="string")throw new Error("key must be a string");return this._size=void 0,Y(this._tree,e).set(w,t),this}get size(){if(this._size)return this._size;this._size=0;const e=this.entries();for(;!e.next().done;)this._size+=1;return this._size}update(e,t){if(typeof e!="string")throw new Error("key must be a string");this._size=void 0;const n=Y(this._tree,e);return n.set(w,t(n.get(w))),this}fetch(e,t){if(typeof e!="string")throw new Error("key must be a string");this._size=void 0;const n=Y(this._tree,e);let s=n.get(w);return s===void 0&&n.set(w,s=t()),s}values(){return new G(this,Me)}[Symbol.iterator](){return this.entries()}static from(e){const t=new k;for(const[n,s]of e)t.set(n,s);return t}static fromObject(e){return k.from(Object.entries(e))}}const P=(i,e,t=[])=>{if(e.length===0||i==null)return[i,t];for(const n of i.keys())if(n!==w&&e.startsWith(n))return t.push([i,n]),P(i.get(n),e.slice(n.length),t);return t.push([i,e]),P(void 0,"",t)},te=(i,e)=>{if(e.length===0||i==null)return i;for(const t of i.keys())if(t!==w&&e.startsWith(t))return te(i.get(t),e.slice(t.length))},Y=(i,e)=>{const t=e.length;e:for(let n=0;i&&n<t;){for(const o of i.keys())if(o!==w&&e[n]===o[0]){const a=Math.min(t-n,o.length);let r=1;for(;r<a&&e[n+r]===o[r];)++r;const c=i.get(o);if(r===o.length)i=c;else{const u=new Map;u.set(o.slice(r),c),i.set(e.slice(n,n+r),u),i.delete(o),i=u}n+=r;continue e}const s=new Map;return i.set(e.slice(n),s),s}return i},gt=(i,e)=>{const[t,n]=P(i,e);if(t!==void 0){if(t.delete(w),t.size===0)Le(n);else if(t.size===1){const[s,o]=t.entries().next().value;Te(n,s,o)}}},Le=i=>{if(i.length===0)return;const[e,t]=oe(i);if(e.delete(t),e.size===0)Le(i.slice(0,-1));else if(e.size===1){const[n,s]=e.entries().next().value;n!==w&&Te(i.slice(0,-1),n,s)}},Te=(i,e,t)=>{if(i.length===0)return;const[n,s]=oe(i);n.set(s+e,t),n.delete(s)},oe=i=>i[i.length-1],re="or",Ae="and",mt="and_not";class O{constructor(e){if((e==null?void 0:e.fields)==null)throw new Error('MiniSearch: option "fields" must be provided');const t=e.autoVacuum==null||e.autoVacuum===!0?Z:e.autoVacuum;this._options={...X,...e,autoVacuum:t,searchOptions:{...be,...e.searchOptions||{}},autoSuggestOptions:{...bt,...e.autoSuggestOptions||{}}},this._index=new k,this._documentCount=0,this._documentIds=new Map,this._idToShortId=new Map,this._fieldIds={},this._fieldLength=new Map,this._avgFieldLength=[],this._nextId=0,this._storedFields=new Map,this._dirtCount=0,this._currentVacuum=null,this._enqueuedVacuum=null,this._enqueuedVacuumConditions=se,this.addFields(this._options.fields)}add(e){const{extractField:t,tokenize:n,processTerm:s,fields:o,idField:a}=this._options,r=t(e,a);if(r==null)throw new Error(`MiniSearch: document does not have ID field "${a}"`);if(this._idToShortId.has(r))throw new Error(`MiniSearch: duplicate ID ${r}`);const c=this.addDocumentId(r);this.saveStoredFields(c,e);for(const u of o){const l=t(e,u);if(l==null)continue;const h=n(l.toString(),u),d=this._fieldIds[u],g=new Set(h).size;this.addFieldLength(c,d,this._documentCount-1,g);for(const m of h){const f=s(m,u);if(Array.isArray(f))for(const p of f)this.addTerm(d,c,p);else f&&this.addTerm(d,c,f)}}}addAll(e){for(const t of e)this.add(t)}addAllAsync(e,t={}){const{chunkSize:n=10}=t,s={chunk:[],promise:Promise.resolve()},{chunk:o,promise:a}=e.reduce(({chunk:r,promise:c},u,l)=>(r.push(u),(l+1)%n===0?{chunk:[],promise:c.then(()=>new Promise(h=>setTimeout(h,0))).then(()=>this.addAll(r))}:{chunk:r,promise:c}),s);return a.then(()=>this.addAll(o))}remove(e){const{tokenize:t,processTerm:n,extractField:s,fields:o,idField:a}=this._options,r=s(e,a);if(r==null)throw new Error(`MiniSearch: document does not have ID field "${a}"`);const c=this._idToShortId.get(r);if(c==null)throw new Error(`MiniSearch: cannot remove document with ID ${r}: it is not in the index`);for(const u of o){const l=s(e,u);if(l==null)continue;const h=t(l.toString(),u),d=this._fieldIds[u],g=new Set(h).size;this.removeFieldLength(c,d,this._documentCount,g);for(const m of h){const f=n(m,u);if(Array.isArray(f))for(const p of f)this.removeTerm(d,c,p);else f&&this.removeTerm(d,c,f)}}this._storedFields.delete(c),this._documentIds.delete(c),this._idToShortId.delete(r),this._fieldLength.delete(c),this._documentCount-=1}removeAll(e){if(e)for(const t of e)this.remove(t);else{if(arguments.length>0)throw new Error("Expected documents to be present. Omit the argument to remove all documents.");this._index=new k,this._documentCount=0,this._documentIds=new Map,this._idToShortId=new Map,this._fieldLength=new Map,this._avgFieldLength=[],this._storedFields=new Map,this._nextId=0}}discard(e){const t=this._idToShortId.get(e);if(t==null)throw new Error(`MiniSearch: cannot discard document with ID ${e}: it is not in the index`);this._idToShortId.delete(e),this._documentIds.delete(t),this._storedFields.delete(t),(this._fieldLength.get(t)||[]).forEach((n,s)=>{this.removeFieldLength(t,s,this._documentCount,n)}),this._fieldLength.delete(t),this._documentCount-=1,this._dirtCount+=1,this.maybeAutoVacuum()}maybeAutoVacuum(){if(this._options.autoVacuum===!1)return;const{minDirtFactor:e,minDirtCount:t,batchSize:n,batchWait:s}=this._options.autoVacuum;this.conditionalVacuum({batchSize:n,batchWait:s},{minDirtCount:t,minDirtFactor:e})}discardAll(e){const t=this._options.autoVacuum;try{this._options.autoVacuum=!1;for(const n of e)this.discard(n)}finally{this._options.autoVacuum=t}this.maybeAutoVacuum()}replace(e){const{idField:t,extractField:n}=this._options,s=n(e,t);this.discard(s),this.add(e)}vacuum(e={}){return this.conditionalVacuum(e)}conditionalVacuum(e,t){return this._currentVacuum?(this._enqueuedVacuumConditions=this._enqueuedVacuumConditions&&t,this._enqueuedVacuum!=null?this._enqueuedVacuum:(this._enqueuedVacuum=this._currentVacuum.then(()=>{const n=this._enqueuedVacuumConditions;return this._enqueuedVacuumConditions=se,this.performVacuuming(e,n)}),this._enqueuedVacuum)):this.vacuumConditionsMet(t)===!1?Promise.resolve():(this._currentVacuum=this.performVacuuming(e),this._currentVacuum)}async performVacuuming(e,t){const n=this._dirtCount;if(this.vacuumConditionsMet(t)){const s=e.batchSize||ne.batchSize,o=e.batchWait||ne.batchWait;let a=1;for(const[r,c]of this._index){for(const[u,l]of c)for(const[h]of l)this._documentIds.has(h)||(l.size<=1?c.delete(u):l.delete(h));this._index.get(r).size===0&&this._index.delete(r),a%s===0&&await new Promise(u=>setTimeout(u,o)),a+=1}this._dirtCount-=n}await null,this._currentVacuum=this._enqueuedVacuum,this._enqueuedVacuum=null}vacuumConditionsMet(e){if(e==null)return!0;let{minDirtCount:t,minDirtFactor:n}=e;return t=t||Z.minDirtCount,n=n||Z.minDirtFactor,this.dirtCount>=t&&this.dirtFactor>=n}get isVacuuming(){return this._currentVacuum!=null}get dirtCount(){return this._dirtCount}get dirtFactor(){return this._dirtCount/(1+this._documentCount+this._dirtCount)}has(e){return this._idToShortId.has(e)}getStoredFields(e){const t=this._idToShortId.get(e);if(t!=null)return this._storedFields.get(t)}search(e,t={}){const{searchOptions:n}=this._options,s={...n,...t},o=this.executeQuery(e,t),a=[];for(const[r,{score:c,terms:u,match:l}]of o){const h=u.length||1,d={id:this._documentIds.get(r),score:c*h,terms:Object.keys(l),queryTerms:u,match:l};Object.assign(d,this._storedFields.get(r)),(s.filter==null||s.filter(d))&&a.push(d)}return e===O.wildcard&&s.boostDocument==null||a.sort(xe),a}autoSuggest(e,t={}){t={...this._options.autoSuggestOptions,...t};const n=new Map;for(const{score:o,terms:a}of this.search(e,t)){const r=a.join(" "),c=n.get(r);c!=null?(c.score+=o,c.count+=1):n.set(r,{score:o,terms:a,count:1})}const s=[];for(const[o,{score:a,terms:r,count:c}]of n)s.push({suggestion:o,terms:r,score:a/c});return s.sort(xe),s}get documentCount(){return this._documentCount}get termCount(){return this._index.size}static loadJSON(e,t){if(t==null)throw new Error("MiniSearch: loadJSON should be given the same options used when serializing the index");return this.loadJS(JSON.parse(e),t)}static async loadJSONAsync(e,t){if(t==null)throw new Error("MiniSearch: loadJSON should be given the same options used when serializing the index");return this.loadJSAsync(JSON.parse(e),t)}static getDefault(e){if(X.hasOwnProperty(e))return H(X,e);throw new Error(`MiniSearch: unknown option "${e}"`)}static loadJS(e,t){const{index:n,documentIds:s,fieldLength:o,storedFields:a,serializationVersion:r}=e,c=this.instantiateMiniSearch(e,t);c._documentIds=N(s),c._fieldLength=N(o),c._storedFields=N(a);for(const[u,l]of c._documentIds)c._idToShortId.set(l,u);for(const[u,l]of n){const h=new Map;for(const d of Object.keys(l)){let g=l[d];r===1&&(g=g.ds),h.set(parseInt(d,10),N(g))}c._index.set(u,h)}return c}static async loadJSAsync(e,t){const{index:n,documentIds:s,fieldLength:o,storedFields:a,serializationVersion:r}=e,c=this.instantiateMiniSearch(e,t);c._documentIds=await j(s),c._fieldLength=await j(o),c._storedFields=await j(a);for(const[l,h]of c._documentIds)c._idToShortId.set(h,l);let u=0;for(const[l,h]of n){const d=new Map;for(const g of Object.keys(h)){let m=h[g];r===1&&(m=m.ds),d.set(parseInt(g,10),await j(m))}++u%1e3===0&&await Ee(0),c._index.set(l,d)}return c}static instantiateMiniSearch(e,t){const{documentCount:n,nextId:s,fieldIds:o,averageFieldLength:a,dirtCount:r,serializationVersion:c}=e;if(c!==1&&c!==2)throw new Error("MiniSearch: cannot deserialize an index created with an incompatible version");const u=new O(t);return u._documentCount=n,u._nextId=s,u._idToShortId=new Map,u._fieldIds=o,u._avgFieldLength=a,u._dirtCount=r||0,u._index=new k,u}executeQuery(e,t={}){if(e===O.wildcard)return this.executeWildcardQuery(t);if(typeof e!="string"){const d={...t,...e,queries:void 0},g=e.queries.map(m=>this.executeQuery(m,d));return this.combineResults(g,d.combineWith)}const{tokenize:n,processTerm:s,searchOptions:o}=this._options,a={tokenize:n,processTerm:s,...o,...t},{tokenize:r,processTerm:c}=a,h=r(e).flatMap(d=>c(d)).filter(d=>!!d).map(yt(a)).map(d=>this.executeQuerySpec(d,a));return this.combineResults(h,a.combineWith)}executeQuerySpec(e,t){const n={...this._options.searchOptions,...t},s=(n.fields||this._options.fields).reduce((f,p)=>({...f,[p]:H(n.boost,p)||1}),{}),{boostDocument:o,weights:a,maxFuzzy:r,bm25:c}=n,{fuzzy:u,prefix:l}={...be.weights,...a},h=this._index.get(e.term),d=this.termResults(e.term,e.term,1,e.termBoost,h,s,o,c);let g,m;if(e.prefix&&(g=this._index.atPrefix(e.term)),e.fuzzy){const f=e.fuzzy===!0?.2:e.fuzzy,p=f<1?Math.min(r,Math.round(e.term.length*f)):f;p&&(m=this._index.fuzzyGet(e.term,p))}if(g)for(const[f,p]of g){const v=f.length-e.term.length;if(!v)continue;m==null||m.delete(f);const y=l*f.length/(f.length+.3*v);this.termResults(e.term,f,y,e.termBoost,p,s,o,c,d)}if(m)for(const f of m.keys()){const[p,v]=m.get(f);if(!v)continue;const y=u*f.length/(f.length+v);this.termResults(e.term,f,y,e.termBoost,p,s,o,c,d)}return d}executeWildcardQuery(e){const t=new Map,n={...this._options.searchOptions,...e};for(const[s,o]of this._documentIds){const a=n.boostDocument?n.boostDocument(o,"",this._storedFields.get(s)):1;t.set(s,{score:a,terms:[],match:{}})}return t}combineResults(e,t=re){if(e.length===0)return new Map;const n=t.toLowerCase(),s=pt[n];if(!s)throw new Error(`Invalid combination operator: ${t}`);return e.reduce(s)||new Map}toJSON(){const e=[];for(const[t,n]of this._index){const s={};for(const[o,a]of n)s[o]=Object.fromEntries(a);e.push([t,s])}return{documentCount:this._documentCount,nextId:this._nextId,documentIds:Object.fromEntries(this._documentIds),fieldIds:this._fieldIds,fieldLength:Object.fromEntries(this._fieldLength),averageFieldLength:this._avgFieldLength,storedFields:Object.fromEntries(this._storedFields),dirtCount:this._dirtCount,index:e,serializationVersion:2}}termResults(e,t,n,s,o,a,r,c,u=new Map){if(o==null)return u;for(const l of Object.keys(a)){const h=a[l],d=this._fieldIds[l],g=o.get(d);if(g==null)continue;let m=g.size;const f=this._avgFieldLength[d];for(const p of g.keys()){if(!this._documentIds.has(p)){this.removeTerm(d,p,t),m-=1;continue}const v=r?r(this._documentIds.get(p),t,this._storedFields.get(p)):1;if(!v)continue;const y=g.get(p),L=this._fieldLength.get(p)[d],T=vt(y,m,this._documentCount,L,f,c),V=n*s*h*v*T,z=u.get(p);if(z){z.score+=V,wt(z.terms,e);const I=H(z.match,t);I?I.push(l):z.match[t]=[l]}else u.set(p,{score:V,terms:[e],match:{[t]:[l]}})}}return u}addTerm(e,t,n){const s=this._index.fetch(n,ze);let o=s.get(e);if(o==null)o=new Map,o.set(t,1),s.set(e,o);else{const a=o.get(t);o.set(t,(a||0)+1)}}removeTerm(e,t,n){if(!this._index.has(n)){this.warnDocumentChanged(t,e,n);return}const s=this._index.fetch(n,ze),o=s.get(e);o==null||o.get(t)==null?this.warnDocumentChanged(t,e,n):o.get(t)<=1?o.size<=1?s.delete(e):o.delete(t):o.set(t,o.get(t)-1),this._index.get(n).size===0&&this._index.delete(n)}warnDocumentChanged(e,t,n){for(const s of Object.keys(this._fieldIds))if(this._fieldIds[s]===t){this._options.logger("warn",`MiniSearch: document with ID ${this._documentIds.get(e)} has changed before removal: term "${n}" was not present in field "${s}". Removing a document after it has changed can corrupt the index!`,"version_conflict");return}}addDocumentId(e){const t=this._nextId;return this._idToShortId.set(e,t),this._documentIds.set(t,e),this._documentCount+=1,this._nextId+=1,t}addFields(e){for(let t=0;t<e.length;t++)this._fieldIds[e[t]]=t}addFieldLength(e,t,n,s){let o=this._fieldLength.get(e);o==null&&this._fieldLength.set(e,o=[]),o[t]=s;const r=(this._avgFieldLength[t]||0)*n+s;this._avgFieldLength[t]=r/(n+1)}removeFieldLength(e,t,n,s){if(n===1){this._avgFieldLength[t]=0;return}const o=this._avgFieldLength[t]*n-s;this._avgFieldLength[t]=o/(n-1)}saveStoredFields(e,t){const{storeFields:n,extractField:s}=this._options;if(n==null||n.length===0)return;let o=this._storedFields.get(e);o==null&&this._storedFields.set(e,o={});for(const a of n){const r=s(t,a);r!==void 0&&(o[a]=r)}}}O.wildcard=Symbol("*");const H=(i,e)=>Object.prototype.hasOwnProperty.call(i,e)?i[e]:void 0,pt={[re]:(i,e)=>{for(const t of e.keys()){const n=i.get(t);if(n==null)i.set(t,e.get(t));else{const{score:s,terms:o,match:a}=e.get(t);n.score=n.score+s,n.match=Object.assign(n.match,a),we(n.terms,o)}}return i},[Ae]:(i,e)=>{const t=new Map;for(const n of e.keys()){const s=i.get(n);if(s==null)continue;const{score:o,terms:a,match:r}=e.get(n);we(s.terms,a),t.set(n,{score:s.score+o,terms:s.terms,match:Object.assign(s.match,r)})}return t},[mt]:(i,e)=>{for(const t of e.keys())i.delete(t);return i}},_t={k:1.2,b:.7,d:.5},vt=(i,e,t,n,s,o)=>{const{k:a,b:r,d:c}=o;return Math.log(1+(t-e+.5)/(e+.5))*(c+i*(a+1)/(i+a*(1-r+r*n/s)))},yt=i=>(e,t,n)=>{const s=typeof i.fuzzy=="function"?i.fuzzy(e,t,n):i.fuzzy||!1,o=typeof i.prefix=="function"?i.prefix(e,t,n):i.prefix===!0,a=typeof i.boostTerm=="function"?i.boostTerm(e,t,n):1;return{term:e,fuzzy:s,prefix:o,termBoost:a}},X={idField:"id",extractField:(i,e)=>i[e],tokenize:i=>i.split(xt),processTerm:i=>i.toLowerCase(),fields:void 0,searchOptions:void 0,storeFields:[],logger:(i,e)=>{typeof(console==null?void 0:console[i])=="function"&&console[i](e)},autoVacuum:!0},be={combineWith:re,prefix:!1,fuzzy:!1,maxFuzzy:6,boost:{},weights:{fuzzy:.45,prefix:.375},bm25:_t},bt={combineWith:Ae,prefix:(i,e,t)=>e===t.length-1},ne={batchSize:1e3,batchWait:10},se={minDirtFactor:.1,minDirtCount:20},Z={...ne,...se},wt=(i,e)=>{i.includes(e)||i.push(e)},we=(i,e)=>{for(const t of e)i.includes(t)||i.push(t)},xe=({score:i},{score:e})=>e-i,ze=()=>new Map,N=i=>{const e=new Map;for(const t of Object.keys(i))e.set(parseInt(t,10),i[t]);return e},j=async i=>{const e=new Map;let t=0;for(const n of Object.keys(i))e.set(parseInt(n,10),i[n]),++t%1e3===0&&await Ee(0);return e},Ee=i=>new Promise(e=>setTimeout(e,i)),xt=/[\n\r\p{Z}\p{P}]+/u,zt=/^[^-]+.*-.*[^-]+$/,It=/^[^_]+.*_.*[^_]+$/;function St(i,e={}){const t=ie([]),n=()=>{t.value.splice(0,t.value.length)},s=Ye(n,e.chainDelay??800),{macOS:o}=He(),a=Xe(),r=l=>{if(!l.key)return;const h=/^[a-z]{1}$/i.test(l.key);let d;if(t.value.push(l.key),t.value.length>=2){d=t.value.slice(-2).join("-");for(const g of u.value.filter(m=>m.chained))if(g.key===d){g.enabled&&(l.preventDefault(),g.handler(l)),n();return}}for(const g of u.value.filter(m=>!m.chained))if(l.key.toLowerCase()===g.key&&l.metaKey===g.metaKey&&l.ctrlKey===g.ctrlKey&&!(h&&l.shiftKey!==g.shiftKey)){g.enabled&&(l.preventDefault(),g.handler()),n();return}s()},c=q(()=>{var g,m,f;const l=(g=a.value)==null?void 0:g.tagName,h=(m=a.value)==null?void 0:m.contentEditable;return l==="INPUT"||l==="TEXTAREA"||h==="true"||h==="plaintext-only"?((f=a.value)==null?void 0:f.name)||!0:!1}),u=q(()=>Object.entries(ee(i)).map(([l,h])=>{var f,p;if(!h)return null;let d;l.includes("-")&&l!=="-"&&!((f=l.match(zt))!=null&&f.length)&&console.trace(`[Shortcut] Invalid key: "${l}"`),l.includes("_")&&l!=="_"&&!((p=l.match(It))!=null&&p.length)&&console.trace(`[Shortcut] Invalid key: "${l}"`);const g=l.includes("-")&&l!=="-";if(g)d={key:l.toLowerCase(),metaKey:!1,ctrlKey:!1,shiftKey:!1,altKey:!1};else{const v=l.toLowerCase().split("_").map(y=>y);d={key:v.filter(y=>!["meta","command","ctrl","shift","alt","option"].includes(y)).join("_"),metaKey:v.includes("meta")||v.includes("command"),ctrlKey:v.includes("ctrl"),shiftKey:v.includes("shift"),altKey:v.includes("alt")||v.includes("option")}}if(d.chained=g,!o.value&&d.metaKey&&!d.ctrlKey&&(d.metaKey=!1,d.ctrlKey=!0),typeof h=="function"?d.handler=h:typeof h=="object"&&(d={...d,handler:h.handler}),!d.handler)return console.trace("[Shortcut] Invalid value"),null;let m=!0;return h.usingInput?typeof h.usingInput=="string"&&(m=c.value===h.usingInput):m=!c.value,d.enabled=m,d}).filter(Boolean));return Ze("keydown",r)}const Ft={class:"bg-elevated rounded-md flex flex-col"},kt={class:"text-neutral-500 text-xs"},Ct={class:"text-neutral-500 text-xs"},Vt=Ie({__name:"ContentSearch",async setup(i){let e,t;const n=ie(""),{data:s}=([e,t]=Se(()=>Fe("search",()=>ke("blog").all())),e=await e,t(),e);console.log(s.value);const o=new O({fields:["title","description"],storeFields:["title","description","path","author","date"],searchOptions:{prefix:!0,fuzzy:.2}});s.value&&o.addAll(ee(s.value));const a=q(()=>o.search(ee(n)));console.log(a.value);const r=et("input");St({meta_k:()=>{var u,l;(l=(u=r.value)==null?void 0:u.inputRef)==null||l.focus()}});function c(){n.value=""}return(u,l)=>{const h=tt,d=dt,g=it,m=Ce;return x(),F(m,{class:"p-0 w-1/2 fixed top-5 right-0 z-1 left-0 flex flex-col justify-center rounded-md"},{default:D(()=>[R(d,{ref_key:"input",ref:r,modelValue:b(n),"onUpdate:modelValue":l[0]||(l[0]=f=>nt(n)?n.value=f:null),icon:"i-lucide-search",placeholder:"Search..."},{trailing:D(()=>[R(h,{value:"meta"}),R(h,{value:"k"})]),_:1},8,["modelValue"]),K("div",Ft,[(x(!0),B(rt,null,st(b(a),f=>(x(),F(g,{key:f.id,class:"mt-2 p-2 hover:bg-accented rounded-md",as:"button",to:f.path,onClick:l[1]||(l[1]=p=>c())},{default:D(()=>[ot(Q(f.title)+" ",1),K("p",kt,Q(f.author),1),K("p",Ct,Q(f.date),1)]),_:2},1032,["to"]))),128))])]),_:1})}}}),Mt=Object.assign(Vt,{__name:"ContentSearch"}),Ot={key:1},Et=Ie({__name:"blog",async setup(i){var s,o;let e,t;const{data:n}=([e,t]=Se(()=>Fe("blog-content",()=>ke("pages").path("/blog").first())),e=await e,t(),e);return at({title:(s=n.value)==null?void 0:s.title,description:(o=n.value)==null?void 0:o.description}),(a,r)=>{const c=Mt,u=lt,l=Ce;return x(),F(l,null,{default:D(()=>[R(c),b(n)?(x(),F(u,{key:0,value:b(n)},null,8,["value"])):(x(),B("div",Ot,"Home not found"))]),_:1})}}});export{Et as default};
